<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">

  <!-- Error global -->
  @if (errorMessage()) {
    <div class="rounded-md bg-red-50 border border-red-200 px-3 py-2 text-sm text-red-700 mb-2">
      {{ errorMessage() }}
    </div>
  }

  <!-- Email -->
  <div class="space-y-1">
    <label
      for="email"
      class="block text-sm font-medium text-slate-700"
    >
      Correo electrónico
    </label>
    <input
      id="email"
      type="email"
      formControlName="email"
      class="w-full px-3 py-2 rounded-md border text-sm outline-none
             border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500
             placeholder:text-slate-400"
      placeholder="tucorreo@ejemplo.com"
    />
    @if (email?.touched && email?.invalid) {
      <p class="text-xs text-red-600 mt-1">
        @if (email?.errors?.['required']) {
          El correo es obligatorio.
        } @else if (email?.errors?.['email']) {
          Ingresa un correo válido.
        }
      </p>
    }
  </div>

  <!-- Password -->
  <div class="space-y-1">
    <label
      for="password"
      class="block text-sm font-medium text-slate-700"
    >
      Contraseña
    </label>
    <input
      id="password"
      type="password"
      formControlName="password"
      class="w-full px-3 py-2 rounded-md border text-sm outline-none
             border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500
             placeholder:text-slate-400"
      placeholder="Mínimo 6 caracteres"
    />
    @if (password?.touched && password?.invalid) {
      <p class="text-xs text-red-600 mt-1">
        @if (password?.errors?.['required']) {
          La contraseña es obligatoria.
        } @else if (password?.errors?.['minlength']) {
          La contraseña debe tener al menos 6 caracteres.
        }
      </p>
    }
  </div>

  <!-- Botón submit -->
  <button
    type="submit"
    [disabled]="isSubmitting() || form.invalid"
    class="w-full flex items-center justify-center gap-2 mt-2
           px-4 py-2 rounded-md text-sm font-medium
           text-white bg-indigo-600 hover:bg-indigo-500
           disabled:opacity-60 disabled:cursor-not-allowed
           transition-colors"
  >
    @if (!isSubmitting()) {
      <span>Iniciar sesión</span>
    } @else {
      <span class="flex items-center gap-2">
        <span
          class="h-4 w-4 border-2 border-white/50 border-t-transparent rounded-full animate-spin"
        ></span>
        Procesando...
      </span>
    }
  </button>

  <!-- Texto secundario -->
  <p class="mt-2 text-xs text-center text-slate-500">
    ¿Aún no tienes cuenta?
    <a routerLink="/auth/register" class="text-brand-600 hover:underline">
      Regístrate aquí
    </a>
  </p>
</form>
